
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="google-signin-client_id" content="370652955246-imb7pam37uphid5i1j121s8ui9foicem.apps.googleusercontent.com" />
<script src="https://apis.google.com/js/platform.js" async="async" defer="defer"></script>
</h:head>

<body>
<style>
body {
    background-color: #2b2b2b;
}

.anim {
    position: absolute;
    right: 0px;
    padding: 10px;
    color: #2b9cc5;
}
</style>
<p:toolbar>

 <f:facet name="right">
   		<h:form>
   			<p:commandButton value="Friends" action="#{navigationBean.friends}"	ajax="false" icon="ui-icon ui-icon-person" style="margin-right:20px;" />
			<p:commandButton value="Add new friend" action="#{navigationBean.addNewFriend}" ajax="false" icon="ui-icon ui-icon-plusthick" style="margin-right:20px;" />
    	</h:form>
 </f:facet>
 <f:facet name="left">
   		<h:form>
	        <p:commandButton value="Home" action="#{navigationBean.home}" ajax="false" icon="ui-icon ui-icon-home" style="margin-right:20px;" />
    		
    	</h:form>
 </f:facet>
</p:toolbar>


<div>
		
		<h:form>
		<p:growl id="growl" life="5000" />
   		 <p:poll interval="3" listener="#{chatBean.fetchNewMessages}" update="dataTabMsgIn" />
			<p:panel header="Chat with #{chatBean.partnerAddress}">
					  
					<p:dataTable id="dataTabMsgIn" value="#{chatBean.chatMsgList}" var="messages"  border="1" cellspacing="5" width="700" style=" border: 2px solid rgb(129,186,233); background-color: rgb(237,237,237);text-align:left;">
						<p:column>
							<f:facet name="header"></f:facet>    				
		     				#{messages.timestamp} - #{messages.sender} wrote:  
		   				</p:column>
		   				<p:column>
							<f:facet name="header"></f:facet>    				
		     				#{messages.body}
		   				</p:column>
					</p:dataTable>
					
					<br></br>
					<br></br>
					<p:inputTextarea id="output" rows="3" cols="119" counter="display" maxlength="300" counterTemplate="{0} characters remaining." autoResize="false" value="#{chatBean.body}"/>
    				<h:outputText id="display" />
    				<br></br>
    				<br></br>
    				<p:commandButton id="btn" value="Send" update="growl" actionListener="#{chatBean.sendMsg}"/>
			</p:panel>
		</h:form>
	</div>

<div class="anim">

Download JustChat for Android:
<a href="downloads/justChatApp.apk">
	<img src="img/justChat.gif" alt="JustChat"/>
</a>
</div>



</body>


</html>
